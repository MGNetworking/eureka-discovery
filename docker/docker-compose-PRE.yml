version: '3.9'

services:
  eureka:
    container_name: eureka
    restart: always
    image: ms-eureka-service:${version:-latest}
    env_file:
      - .env
    build:
      context: ../
      dockerfile: dockerfile
      args:
        - CONFIG_SERVICE_URI_ARG=${IP_PRE}
        - env_profile=${env_PRE}
    ports:
      - "8099:8099"
    environment:
      - SPRING_PROFILES_ACTIVE=${env_PRE}
      - CONFIG_SERVICE_URI=${IP_PRE}

    networks:
      - spring-network

networks:
  spring-network:
    name: blog-network
    external: true    # indic qui ce connectera au réseau existant blog-network
    driver: bridge    # indic le type de réseau docker